<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <title>Manage Bookings</title>
</head>
<body>
    <nav>
        <div class="page-title"><a href="{{ url_for('admin.admin_index') }}">‚Üê Back to Admin</a></div>
        <div>
            {% if session.get('user_id') %}
                <a href="{{ url_for('auth.profile') }}">Hi, {{ session['name'] }}</a>
                <a href="{{ url_for('auth.logout') }}">Logout</a>
            {% else %}
                <a href="{{ url_for('auth.login') }}">Login</a>
            {% endif %}
        </div>
    </nav>

    <div style="max-width:1000px;margin:30px auto;padding:20px;background:#1f1f1f;border-radius:8px;">
        <h1>Current Bookings</h1>
        {% if bookings %}
            <table style="width:100%;border-collapse:collapse;">
                <thead>
                    <tr style="text-align:left;border-bottom:1px solid #333;">
                        <th>User</th>
                        <th>Movie</th>
                        <th>Show</th>
                        <th>Seats</th>
                        <th>Booked At</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {% for b in bookings %}
                        <tr style="border-bottom:1px solid #2a2a2a;">
                            <td>{{ b.user_name }}</td>
                            <td>{{ b.title }}</td>
                            <td>{{ b.show_date }} {{ b.show_time }}</td>
                            <td>{{ b.seats or '' }}</td>
                            <td>{{ b.booking_time }}</td>
                            <td>
                                <form method="post" action="{{ url_for('admin.admin_cancel_booking') }}" onsubmit="return confirm('Cancel this booking?');">
                                    <input type="hidden" name="booking_id" value="{{ b.booking_id }}">
                                    <button type="submit" style="background:#a00;border:none;color:#fff;padding:6px 8px;border-radius:6px;cursor:pointer;">Cancel</button>
                                </form>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p style="color:#aaa;">No current bookings.</p>
        {% endif %}
    </div>
</body>
</html>